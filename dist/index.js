(()=>{"use strict";(()=>{const{log:t,error:e,table:n,time:i,timeEnd:r,timeStamp:a,timeLog:o,assert:s,clear:c,count:d,countReset:l,group:h,groupCollapsed:g,groupEnd:u,trace:f,warn:v,debug:m,info:w,dir:p,dirxml:y}=console;function x(t,e){var n;if(!e)return document.querySelector(t);return(null===(n=null==e?void 0:e.tagName)||void 0===n?void 0:n.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function b(t,e,n){t.setAttribute(e,n.toString())}function k(t,e){t.classList.add(e)}function L(t,e){t.classList.remove(e)}function E(t,e){t.innerHTML=e}function A(t){return Array.from(t)}var _=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))};function C(t,e){const{type:n}=t;var i,r;return(i=n,r="/",i.split(r))[0]===e}function D(t){return new Promise(((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.addEventListener("load",(()=>{const t=i.result;"string"!=typeof t?n("Error: Base64 string not found."):e(t)})),i.addEventListener("error",(()=>{n("Error: Failed to read audio file.")}))}))}const H=document.createElement("template");H.innerHTML='\n  <style>\n    \n*,\n::before,\n::after {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n.hide{\n    display: none !important;\n}\n\n    \n:host {\n  --stroke-color: black;\n}\n\n@media (prefers-color-scheme: dark) {\n  :host {\n    --stroke-color: white;\n  }\n}\n\n.svg__circle {\n    stroke-width: 5px;\n    stroke: var(--stroke-color);\n    transform-origin: center;\n    -webkit-animation: spin-loader 2s ease-in-out infinite normal backwards;\n    animation: spin-loader 2s ease-in-out infinite normal backwards;\n    z-index: 69420;\n}\n\n@-webkit-keyframes spin-loader {\n  0% {\n    stroke-dasharray: 249.706;\n    stroke-dashoffset: 124.853;\n    rotate: 0deg;\n  }\n  50% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 124.853;\n    rotate: -90deg;\n  }\n  100% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 249.706;\n    rotate: -360deg;\n  }\n}\n\n@keyframes spin-loader {\n  0% {\n    stroke-dasharray: 249.706;\n    stroke-dashoffset: 124.853;\n    rotate: 0deg;\n  }\n  50% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 124.853;\n    rotate: -90deg;\n  }\n  100% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 249.706;\n    rotate: -360deg;\n  }\n}\n\n  </style>\n  \n  \n <svg class="svg" viewBox="0 0 50 50" width="50" height="50">\n  <circle class="svg__circle" cx="25" cy="25" r="20" fill="transparent" />\n</svg>\n\n';class Z extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=H.content.cloneNode(!0);t.appendChild(e)}static get observedAttributes(){return["show"]}get show(){return this.getAttribute("show")}set show(t){this.setAttribute("show",t)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(e,n,i){const r=x("svg",this.shadowRoot);switch(e){case"show":"false"===i?(t("needs to be hidden"),k(r,"hide")):(t("needs to be shown"),L(r,"hide"));break}}}customElements.define("spin-loader",Z);class M{constructor(t,e,n,i,r){this.context=t,this.x=e,this.y=n,this.symbol=i,this.color=r}draw(){this.context.fillStyle=this.color,this.context.fillText(this.symbol,this.x,this.y)}}class R{constructor(t,e,n,i){this.context=t,this.width=n,this.height=i,this.context.drawImage(e,0,0,this.width,this.height),this.pixelsData=this.context.getImageData(0,0,this.width,this.height)}scanImage(e){this.imageCellArray=[],t("scanning image");for(let t=0;t<this.pixelsData.height;t+=e)for(let n=0;n<this.pixelsData.width;n+=e){const e=4*n+4*t*this.pixelsData.width,i=(this.pixelsData.data[e+3],this.pixelsData.data[e+0]),r=this.pixelsData.data[e+1],a=this.pixelsData.data[e+2],o=(i+r+a)/3,s=`rgb(${i}, ${r}, ${a})`,c=this.convertToSymbol(o),d=new M(this.context,n,t,c,s);this.imageCellArray.push(d)}t("Image cells array",this.imageCellArray)}convertToSymbol(t){return t>=250?"@":t>=200?"#":t>=180?"&":t>=160?"%":t>=140?"$":t>=120?"+":t>=100?"*":t>=80?",":t>=60?":":t>=40?"-":t>=20?".":" "}drawAscii(){this.context.clearRect(0,0,this.width,this.height);for(const t of this.imageCellArray)t.draw()}draw(t){this.scanImage(t)}}var S=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((i=i.apply(t,e||[])).next())}))};const $=x("main"),T=x(".index__label"),V=x(".index__input"),F=x(".index__resolution-range"),B=x(".index__resolution-label--span");F.addEventListener("input",(function(t){const e=t.target.value;n=B,i=`${e}px`,n.textContent=i;var n,i}));const I=Number(F.value);function q(t){t.preventDefault(),k($,"dragging"),k(T,"dragging")}function N(t){t.preventDefault();(t.clientX<=0||t.clientY<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(L($,"dragging"),L(T,"dragging"),L(T,"dragging-over"))}document.addEventListener("dragenter",q),document.addEventListener("dragleave",N),T.addEventListener("dragover",(function(t){t.preventDefault(),k(T,"dragging-over")})),T.addEventListener("drop",(function(n){return S(this,void 0,void 0,(function*(){n.preventDefault(),z();try{L($,"dragging"),L(T,"dragging"),L(T,"dragging-over");const i=yield function(t){return _(this,void 0,void 0,(function*(){try{const e=A(t.dataTransfer.files);return 1===e.length?e[0]:e}catch(t){e({fileRetrievalError:t})}}))}(n);if(!C(i,"image"))throw"File dropped is not an image!";t(i);X(yield D(i))}catch(t){e("File drop error:",{fileDropError:t});E(T,`${'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="150" height="150" id="image"\n          fill="currentColor" class="no-pointer-events">\n        <path\n            d="M19,2H5A3,3,0,0,0,2,5V19a3,3,0,0,0,3,3H19a2.81,2.81,0,0,0,.49-.05l.3-.07.07,0h0l.05,0,.37-.14.13-.07c.1-.06.21-.11.31-.18a3.79,3.79,0,0,0,.38-.32l.07-.09a2.69,2.69,0,0,0,.27-.32l.09-.13a2.31,2.31,0,0,0,.18-.35,1,1,0,0,0,.07-.15c.05-.12.08-.25.12-.38l0-.15A2.6,2.6,0,0,0,22,19V5A3,3,0,0,0,19,2ZM5,20a1,1,0,0,1-1-1V14.69l3.29-3.3h0a1,1,0,0,1,1.42,0L17.31,20Zm15-1a1,1,0,0,1-.07.36,1,1,0,0,1-.08.14.94.94,0,0,1-.09.12l-5.35-5.35.88-.88a1,1,0,0,1,1.42,0h0L20,16.69Zm0-5.14L18.12,12a3.08,3.08,0,0,0-4.24,0l-.88.88L10.12,10a3.08,3.08,0,0,0-4.24,0L4,11.86V5A1,1,0,0,1,5,4H19a1,1,0,0,1,1,1ZM13.5,6A1.5,1.5,0,1,0,15,7.5,1.5,1.5,0,0,0,13.5,6Z">\n        </path>\n    </svg>\n    '} ${t}`),U()}}))})),V.addEventListener("change",(function(n){return S(this,void 0,void 0,(function*(){z();try{const i=n.currentTarget,r=yield function(t){return _(this,void 0,void 0,(function*(){try{const e=A(t.files);return 1===e.length?e[0]:e}catch(t){e({fileRetrievalError:t})}}))}(i);if(!C(r,"image"))throw"File uploaded is not an image!";t(r);X(yield D(r))}catch(t){e("File upload error:",{fileUploadError:t});E(T,`${'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="150" height="150" id="image"\n          fill="currentColor" class="no-pointer-events">\n        <path\n            d="M19,2H5A3,3,0,0,0,2,5V19a3,3,0,0,0,3,3H19a2.81,2.81,0,0,0,.49-.05l.3-.07.07,0h0l.05,0,.37-.14.13-.07c.1-.06.21-.11.31-.18a3.79,3.79,0,0,0,.38-.32l.07-.09a2.69,2.69,0,0,0,.27-.32l.09-.13a2.31,2.31,0,0,0,.18-.35,1,1,0,0,0,.07-.15c.05-.12.08-.25.12-.38l0-.15A2.6,2.6,0,0,0,22,19V5A3,3,0,0,0,19,2ZM5,20a1,1,0,0,1-1-1V14.69l3.29-3.3h0a1,1,0,0,1,1.42,0L17.31,20Zm15-1a1,1,0,0,1-.07.36,1,1,0,0,1-.08.14.94.94,0,0,1-.09.12l-5.35-5.35.88-.88a1,1,0,0,1,1.42,0h0L20,16.69Zm0-5.14L18.12,12a3.08,3.08,0,0,0-4.24,0l-.88.88L10.12,10a3.08,3.08,0,0,0-4.24,0L4,11.86V5A1,1,0,0,1,5,4H19a1,1,0,0,1,1,1ZM13.5,6A1.5,1.5,0,1,0,15,7.5,1.5,1.5,0,0,0,13.5,6Z">\n        </path>\n    </svg>\n    '} ${t}`),U()}}))}));const P=x("spin-loader");function z(){b(P,"show",!0)}function U(){b(P,"show",!1)}function X(t){Y.src=t}const Y=x(".index__image");Y.addEventListener("load",(function(n){return S(this,void 0,void 0,(function*(){try{t("image change",n),k(T,"hide"),document.removeEventListener("dragenter",q),document.removeEventListener("dragleave",N),function(){const{width:t,height:e}=J.getBoundingClientRect();W.width=t,W.height=e}(),G=new R(j,Y,W.width,W.height),G.draw(I),t(G)}catch(t){e({imageChangeError:t})}finally{U()}}))}));const W=x(".index__canvas"),j=W.getContext("2d");let G;const J=x(".index__image-preview")})()})();