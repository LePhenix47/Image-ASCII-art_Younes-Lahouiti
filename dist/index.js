(()=>{"use strict";(()=>{const{log:t,error:n,table:e,time:i,timeEnd:r,timeStamp:a,timeLog:o,assert:s,clear:c,count:d,countReset:l,group:h,groupCollapsed:g,groupEnd:u,trace:f,warn:v,debug:m,info:w,dir:p,dirxml:x}=console;function y(t,n){var e;if(!n)return document.querySelector(t);return(null===(e=null==n?void 0:n.tagName)||void 0===e?void 0:e.includes("-"))?n.shadowRoot.querySelector(t):n.querySelector(t)}function b(t,n,e){t.setAttribute(n,e.toString())}function k(t,n){t.classList.add(n)}function L(t,n){t.classList.remove(n)}function E(t,n){t.innerHTML=n}function A(t){return Array.from(t)}var _=function(t,n,e,i){return new(e||(e=Promise))((function(r,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}c((i=i.apply(t,n||[])).next())}))};function D(t,n){const{type:e}=t;var i,r;return(i=e,r="/",i.split(r))[0]===n}function C(t){return new Promise(((n,e)=>{const i=new FileReader;i.readAsDataURL(t),i.addEventListener("load",(()=>{const t=i.result;"string"!=typeof t?e("Error: Base64 string not found."):n(t)})),i.addEventListener("error",(()=>{e("Error: Failed to read audio file.")}))}))}const H=document.createElement("template");H.innerHTML='\n  <style>\n    \n*,\n::before,\n::after {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n.hide{\n    display: none !important;\n}\n\n    \n:host {\n  --stroke-color: black;\n}\n\n@media (prefers-color-scheme: dark) {\n  :host {\n    --stroke-color: white;\n  }\n}\n\n.svg__circle {\n    stroke-width: 5px;\n    stroke: var(--stroke-color);\n    transform-origin: center;\n    -webkit-animation: spin-loader 2s ease-in-out infinite normal backwards;\n    animation: spin-loader 2s ease-in-out infinite normal backwards;\n    z-index: 69420;\n}\n\n@-webkit-keyframes spin-loader {\n  0% {\n    stroke-dasharray: 249.706;\n    stroke-dashoffset: 124.853;\n    rotate: 0deg;\n  }\n  50% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 124.853;\n    rotate: -90deg;\n  }\n  100% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 249.706;\n    rotate: -360deg;\n  }\n}\n\n@keyframes spin-loader {\n  0% {\n    stroke-dasharray: 249.706;\n    stroke-dashoffset: 124.853;\n    rotate: 0deg;\n  }\n  50% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 124.853;\n    rotate: -90deg;\n  }\n  100% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 249.706;\n    rotate: -360deg;\n  }\n}\n\n  </style>\n  \n  \n <svg class="svg" viewBox="0 0 50 50" width="50" height="50">\n  <circle class="svg__circle" cx="25" cy="25" r="20" fill="transparent" />\n</svg>\n\n';class R extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),n=H.content.cloneNode(!0);t.appendChild(n)}static get observedAttributes(){return["show"]}get show(){return this.getAttribute("show")}set show(t){this.setAttribute("show",t)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(n,e,i){const r=y("svg",this.shadowRoot);switch(n){case"show":"false"===i?(t("needs to be hidden"),k(r,"hide")):(t("needs to be shown"),L(r,"hide"));break}}}customElements.define("spin-loader",R);class Z{constructor(t,n,e,i,r){this.context=t,this.x=n,this.y=e,this.symbol=i,this.color=r}draw(){this.context.fillStyle=this.color,this.context.fillText(this.symbol,this.x,this.y)}}class ${constructor(t,n,e,i){this.context=t,this.width=e,this.height=i,this.context.drawImage(n,0,0,this.width,this.height),this.pixelsData=this.context.getImageData(0,0,this.width,this.height)}scanImage(n){this.imageCellArray=[],t("scanning image");for(let t=0;t<this.pixelsData.height;t+=n)for(let e=0;e<this.pixelsData.width;e+=n){const n=4*e+4*t*this.pixelsData.width;if(this.pixelsData.data[n+3]<128)continue;const i=this.pixelsData.data[n+0],r=this.pixelsData.data[n+1],a=this.pixelsData.data[n+2],o=(i+r+a)/3,s=`rgb(${i}, ${r}, ${a})`,c=this.convertToSymbol(o),d=new Z(this.context,e,t,c,s);this.imageCellArray.push(d)}t("Image cells array",this.imageCellArray)}convertToSymbol(t){return t>=250?"@":t>=200?"#":t>=180?"&":t>=160?"%":t>=140?"$":t>=120?"+":t>=100?"*":t>=80?",":t>=60?":":t>=40?"-":t>=20?".":" "}drawAscii(){this.context.clearRect(0,0,this.width,this.height);for(const t of this.imageCellArray)t.draw()}draw(t){this.scanImage(t),this.drawAscii()}}var M=function(t,n,e,i){return new(e||(e=Promise))((function(r,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}c((i=i.apply(t,n||[])).next())}))};const S=y("main"),T=y(".index__label"),V=y(".index__input"),F=y(".index__link"),B=y(".index__resolution-range"),I=y(".index__resolution-label--span");B.addEventListener("input",(function(t){const n=Number(t.target.value);e=I,i=`${n}px`,e.textContent=i;var e,i;if(!J)return;r=n,G.font=`${r}`,J.draw(n);var r}));const N=Number(B.value);function q(t){t.preventDefault(),k(S,"dragging"),k(T,"dragging")}function P(t){t.preventDefault();(t.clientX<=0||t.clientY<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(L(S,"dragging"),L(T,"dragging"),L(T,"dragging-over"))}document.addEventListener("dragenter",q),document.addEventListener("dragleave",P),T.addEventListener("dragover",(function(t){t.preventDefault(),k(T,"dragging")})),T.addEventListener("drop",(function(e){return M(this,void 0,void 0,(function*(){e.preventDefault(),z(),t(e);try{L(S,"dragging"),L(T,"dragging");const i=yield function(t){return _(this,void 0,void 0,(function*(){try{const n=A(t.dataTransfer.files);return n.length<=1?n[0]:n}catch(t){n({fileRetrievalError:t})}}))}(e),r=!i;if(t(r),r)throw"Data dropped is not a file!";if(!D(i,"image"))throw"File dropped is not an image!";t(i);Y(yield C(i))}catch(t){n("File drop error:",{fileDropError:t});E(T,`${'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="150" height="150" id="image"\n          fill="currentColor" class="no-pointer-events">\n        <path\n            d="M19,2H5A3,3,0,0,0,2,5V19a3,3,0,0,0,3,3H19a2.81,2.81,0,0,0,.49-.05l.3-.07.07,0h0l.05,0,.37-.14.13-.07c.1-.06.21-.11.31-.18a3.79,3.79,0,0,0,.38-.32l.07-.09a2.69,2.69,0,0,0,.27-.32l.09-.13a2.31,2.31,0,0,0,.18-.35,1,1,0,0,0,.07-.15c.05-.12.08-.25.12-.38l0-.15A2.6,2.6,0,0,0,22,19V5A3,3,0,0,0,19,2ZM5,20a1,1,0,0,1-1-1V14.69l3.29-3.3h0a1,1,0,0,1,1.42,0L17.31,20Zm15-1a1,1,0,0,1-.07.36,1,1,0,0,1-.08.14.94.94,0,0,1-.09.12l-5.35-5.35.88-.88a1,1,0,0,1,1.42,0h0L20,16.69Zm0-5.14L18.12,12a3.08,3.08,0,0,0-4.24,0l-.88.88L10.12,10a3.08,3.08,0,0,0-4.24,0L4,11.86V5A1,1,0,0,1,5,4H19a1,1,0,0,1,1,1ZM13.5,6A1.5,1.5,0,1,0,15,7.5,1.5,1.5,0,0,0,13.5,6Z">\n        </path>\n    </svg>\n    '} ${t}`),X()}}))})),V.addEventListener("change",(function(e){return M(this,void 0,void 0,(function*(){z();try{const i=e.currentTarget,r=yield function(t){return _(this,void 0,void 0,(function*(){try{const n=A(t.files);return 1===n.length?n[0]:n}catch(t){n({fileRetrievalError:t})}}))}(i);if(!D(r,"image"))throw"File uploaded is not an image!";t(r);Y(yield C(r))}catch(t){n("File upload error:",{fileUploadError:t});E(T,`${'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="150" height="150" id="image"\n          fill="currentColor" class="no-pointer-events">\n        <path\n            d="M19,2H5A3,3,0,0,0,2,5V19a3,3,0,0,0,3,3H19a2.81,2.81,0,0,0,.49-.05l.3-.07.07,0h0l.05,0,.37-.14.13-.07c.1-.06.21-.11.31-.18a3.79,3.79,0,0,0,.38-.32l.07-.09a2.69,2.69,0,0,0,.27-.32l.09-.13a2.31,2.31,0,0,0,.18-.35,1,1,0,0,0,.07-.15c.05-.12.08-.25.12-.38l0-.15A2.6,2.6,0,0,0,22,19V5A3,3,0,0,0,19,2ZM5,20a1,1,0,0,1-1-1V14.69l3.29-3.3h0a1,1,0,0,1,1.42,0L17.31,20Zm15-1a1,1,0,0,1-.07.36,1,1,0,0,1-.08.14.94.94,0,0,1-.09.12l-5.35-5.35.88-.88a1,1,0,0,1,1.42,0h0L20,16.69Zm0-5.14L18.12,12a3.08,3.08,0,0,0-4.24,0l-.88.88L10.12,10a3.08,3.08,0,0,0-4.24,0L4,11.86V5A1,1,0,0,1,5,4H19a1,1,0,0,1,1,1ZM13.5,6A1.5,1.5,0,1,0,15,7.5,1.5,1.5,0,0,0,13.5,6Z">\n        </path>\n    </svg>\n    '} ${t}`),X()}}))}));const U=y("spin-loader");function z(){b(U,"show",!0)}function X(){b(U,"show",!1)}function Y(t){W.src=t}const W=y(".index__image");W.addEventListener("load",(function(e){return M(this,void 0,void 0,(function*(){try{t("image change",e),k(T,"hide"),document.removeEventListener("dragenter",q),document.removeEventListener("dragleave",P),function(){const{width:t,height:n}=K.getBoundingClientRect();j.width=t,j.height=n}(),F.addEventListener("click",O),J=new $(G,W,j.width,j.height),J.draw(N),t(J)}catch(t){n({imageChangeError:t})}finally{X()}}))}));const j=y(".index__canvas"),G=j.getContext("2d");let J;const K=y(".index__image-preview");function O(){const t=j.toDataURL("image/png");F.href=t,F.download="ascii_image.png"}})()})();