(()=>{"use strict";(()=>{const{log:t,error:e,table:n,time:i,timeEnd:r,timeStamp:a,timeLog:o,assert:s,clear:d,count:c,countReset:l,group:h,groupCollapsed:g,groupEnd:u,trace:f,warn:v,debug:m,info:w,dir:p,dirxml:x}=console;function y(t,e){var n;if(!e)return document.querySelector(t);return(null===(n=null==e?void 0:e.tagName)||void 0===n?void 0:n.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function b(t,e,n){t.setAttribute(e,n.toString())}function k(t,e){t.classList.add(e)}function L(t,e){t.classList.remove(e)}function E(t,e){t.innerHTML=e}function A(t){return Array.from(t)}var _=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{d(i.next(t))}catch(t){a(t)}}function s(t){try{d(i.throw(t))}catch(t){a(t)}}function d(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}d((i=i.apply(t,e||[])).next())}))};function D(t,e){const{type:n}=t;var i,r;return(i=n,r="/",i.split(r))[0]===e}function C(t){return new Promise(((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.addEventListener("load",(()=>{const t=i.result;"string"!=typeof t?n("Error: Base64 string not found."):e(t)})),i.addEventListener("error",(()=>{n("Error: Failed to read audio file.")}))}))}const H=document.createElement("template");H.innerHTML='\n  <style>\n    \n*,\n::before,\n::after {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n.hide{\n    display: none !important;\n}\n\n    \n:host {\n  --stroke-color: black;\n}\n\n@media (prefers-color-scheme: dark) {\n  :host {\n    --stroke-color: white;\n  }\n}\n\n.svg__circle {\n    stroke-width: 5px;\n    stroke: var(--stroke-color);\n    transform-origin: center;\n    -webkit-animation: spin-loader 2s ease-in-out infinite normal backwards;\n    animation: spin-loader 2s ease-in-out infinite normal backwards;\n    z-index: 69420;\n}\n\n@-webkit-keyframes spin-loader {\n  0% {\n    stroke-dasharray: 249.706;\n    stroke-dashoffset: 124.853;\n    rotate: 0deg;\n  }\n  50% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 124.853;\n    rotate: -90deg;\n  }\n  100% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 249.706;\n    rotate: -360deg;\n  }\n}\n\n@keyframes spin-loader {\n  0% {\n    stroke-dasharray: 249.706;\n    stroke-dashoffset: 124.853;\n    rotate: 0deg;\n  }\n  50% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 124.853;\n    rotate: -90deg;\n  }\n  100% {\n    stroke-dasharray: 124.853;\n    stroke-dashoffset: 249.706;\n    rotate: -360deg;\n  }\n}\n\n  </style>\n  \n  \n <svg class="svg" viewBox="0 0 50 50" width="50" height="50">\n  <circle class="svg__circle" cx="25" cy="25" r="20" fill="transparent" />\n</svg>\n\n';class R extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=H.content.cloneNode(!0);t.appendChild(e)}static get observedAttributes(){return["show"]}get show(){return this.getAttribute("show")}set show(t){this.setAttribute("show",t)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(e,n,i){const r=y("svg",this.shadowRoot);switch(e){case"show":"false"===i?(t("needs to be hidden"),k(r,"hide")):(t("needs to be shown"),L(r,"hide"));break}}}customElements.define("spin-loader",R);class Z{constructor(t,e,n,i,r){this.context=t,this.x=e,this.y=n,this.symbol=i,this.color=r}draw(){this.context.fillStyle=this.color,this.context.fillText(this.symbol,this.x,this.y)}}class ${constructor(t,e,n,i){this.context=t,this.width=n,this.height=i,this.context.drawImage(e,0,0,this.width,this.height),this.pixelsData=this.context.getImageData(0,0,this.width,this.height)}scanImage(e){this.imageCellArray=[],t("scanning image");for(let t=0;t<this.pixelsData.height;t+=e)for(let n=0;n<this.pixelsData.width;n+=e){const e=4*n+4*t*this.pixelsData.width;if(this.pixelsData.data[e+3]<128)continue;const i=this.pixelsData.data[e+0],r=this.pixelsData.data[e+1],a=this.pixelsData.data[e+2],o=(i+r+a)/3,s=`rgb(${i}, ${r}, ${a})`,d=this.convertToSymbol(o),c=new Z(this.context,n,t,d,s);this.imageCellArray.push(c)}t("Image cells array",this.imageCellArray)}convertToSymbol(t){return t>=250?"@":t>=200?"#":t>=180?"&":t>=160?"%":t>=140?"$":t>=120?"+":t>=100?"*":t>=80?",":t>=60?":":t>=40?"-":t>=20?".":" "}drawAscii(){this.context.clearRect(0,0,this.width,this.height);for(const t of this.imageCellArray)t.draw()}draw(t){this.scanImage(t),this.drawAscii()}}var M=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{d(i.next(t))}catch(t){a(t)}}function s(t){try{d(i.throw(t))}catch(t){a(t)}}function d(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}d((i=i.apply(t,e||[])).next())}))};const S=y("main"),T=y(".index__label"),V=y(".index__input"),F=y(".index__image");F.addEventListener("load",(function(n){return M(this,void 0,void 0,(function*(){try{t("image change",n),k(T,"hide"),document.removeEventListener("dragenter",W),document.removeEventListener("dragleave",j),function(){const{width:t,height:e}=B.getBoundingClientRect();N.width=t,N.height=e}(),U.addEventListener("click",O),P=new $(q,F,N.width,N.height),P.draw(Y),t(P)}catch(t){e({imageChangeError:t})}finally{J()}}))}));const B=y(".index__image-preview"),I=y("spin-loader"),N=y(".index__canvas"),q=N.getContext("2d");let P;const U=y(".index__link"),z=y(".index__resolution-range"),X=y(".index__resolution-label--span");z.addEventListener("input",(function(t){const e=Number(t.target.value);n=X,i=`${e}px`,n.textContent=i;var n,i;if(!P)return;r=e,q.font=`${r}`,P.draw(e);var r}));const Y=Number(z.value);function W(t){t.preventDefault(),k(S,"dragging"),k(T,"dragging")}function j(t){t.preventDefault();(t.clientX<=0||t.clientY<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(L(S,"dragging"),L(T,"dragging"),L(T,"dragging-over"))}function G(){b(I,"show",!0)}function J(){b(I,"show",!1)}function K(t){F.src=t}function O(){const t=N.toDataURL("image/png");U.href=t,U.download="ascii_image.png"}document.addEventListener("dragenter",W),document.addEventListener("dragleave",j),T.addEventListener("dragover",(function(t){t.preventDefault(),k(T,"dragging")})),T.addEventListener("drop",(function(n){return M(this,void 0,void 0,(function*(){n.preventDefault(),G(),t(n);try{L(S,"dragging"),L(T,"dragging");const i=yield function(t){return _(this,void 0,void 0,(function*(){try{const e=A(t.dataTransfer.files);return e.length<=1?e[0]:e}catch(t){e({fileRetrievalError:t})}}))}(n),r=!i;if(t(r),r)throw"Data dropped is not a file!";if(!D(i,"image"))throw"File dropped is not an image!";t(i);K(yield C(i))}catch(t){e("File drop error:",{fileDropError:t});E(T,`${'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="150" height="150" id="image"\n          fill="currentColor" class="no-pointer-events">\n        <path\n            d="M19,2H5A3,3,0,0,0,2,5V19a3,3,0,0,0,3,3H19a2.81,2.81,0,0,0,.49-.05l.3-.07.07,0h0l.05,0,.37-.14.13-.07c.1-.06.21-.11.31-.18a3.79,3.79,0,0,0,.38-.32l.07-.09a2.69,2.69,0,0,0,.27-.32l.09-.13a2.31,2.31,0,0,0,.18-.35,1,1,0,0,0,.07-.15c.05-.12.08-.25.12-.38l0-.15A2.6,2.6,0,0,0,22,19V5A3,3,0,0,0,19,2ZM5,20a1,1,0,0,1-1-1V14.69l3.29-3.3h0a1,1,0,0,1,1.42,0L17.31,20Zm15-1a1,1,0,0,1-.07.36,1,1,0,0,1-.08.14.94.94,0,0,1-.09.12l-5.35-5.35.88-.88a1,1,0,0,1,1.42,0h0L20,16.69Zm0-5.14L18.12,12a3.08,3.08,0,0,0-4.24,0l-.88.88L10.12,10a3.08,3.08,0,0,0-4.24,0L4,11.86V5A1,1,0,0,1,5,4H19a1,1,0,0,1,1,1ZM13.5,6A1.5,1.5,0,1,0,15,7.5,1.5,1.5,0,0,0,13.5,6Z">\n        </path>\n    </svg>\n    '} ${t}`),J()}}))})),V.addEventListener("change",(function(n){return M(this,void 0,void 0,(function*(){G();try{const i=n.currentTarget,r=yield function(t){return _(this,void 0,void 0,(function*(){try{const e=A(t.files);return 1===e.length?e[0]:e}catch(t){e({fileRetrievalError:t})}}))}(i);if(!D(r,"image"))throw"File uploaded is not an image!";t(r);K(yield C(r))}catch(t){e("File upload error:",{fileUploadError:t});E(T,`${'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="150" height="150" id="image"\n          fill="currentColor" class="no-pointer-events">\n        <path\n            d="M19,2H5A3,3,0,0,0,2,5V19a3,3,0,0,0,3,3H19a2.81,2.81,0,0,0,.49-.05l.3-.07.07,0h0l.05,0,.37-.14.13-.07c.1-.06.21-.11.31-.18a3.79,3.79,0,0,0,.38-.32l.07-.09a2.69,2.69,0,0,0,.27-.32l.09-.13a2.31,2.31,0,0,0,.18-.35,1,1,0,0,0,.07-.15c.05-.12.08-.25.12-.38l0-.15A2.6,2.6,0,0,0,22,19V5A3,3,0,0,0,19,2ZM5,20a1,1,0,0,1-1-1V14.69l3.29-3.3h0a1,1,0,0,1,1.42,0L17.31,20Zm15-1a1,1,0,0,1-.07.36,1,1,0,0,1-.08.14.94.94,0,0,1-.09.12l-5.35-5.35.88-.88a1,1,0,0,1,1.42,0h0L20,16.69Zm0-5.14L18.12,12a3.08,3.08,0,0,0-4.24,0l-.88.88L10.12,10a3.08,3.08,0,0,0-4.24,0L4,11.86V5A1,1,0,0,1,5,4H19a1,1,0,0,1,1,1ZM13.5,6A1.5,1.5,0,1,0,15,7.5,1.5,1.5,0,0,0,13.5,6Z">\n        </path>\n    </svg>\n    '} ${t}`),J()}}))}))})()})();